(this["webpackJsonpcgt290-final"]=this["webpackJsonpcgt290-final"]||[]).push([[0],{362:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));var n=a(9),i=a(11),r=a(363),s=function(){function t(a,i){var s=this;Object(n.a)(this,t),this.global=[],this.buyerMap={},this.buyers=[],this.sellerMap={},this.sellers=[],this.itemMap={},this.items=[],this.guildMap={},this.guilds=[],this.dateMap={},this.dates=[],this.i=0,this.len=1,i("Fetching data...");var o="undefined"!==typeof e&&null!=e.versions&&null!=e.versions.node;fetch(o?"NicolasNewman/CGT290-Final/master/data/data.csv":"https://raw.githubusercontent.com/NicolasNewman/CGT290-Final/master/data/data.csv").then((function(e){return e.text()})).then((function(e){i("Loading csv..."),Object(r.parse)(e,{worker:!0,header:!0,step:function(e){s.i=s.i+1;var t=e.data;if(s.global.push(t),void 0!==t.timestamp){var a=t.item;s.insert(a,t,s.itemMap);var n=t.buyer;s.insert(n,t,s.buyerMap);var i=t.seller;s.insert(i,t,s.sellerMap);var r=t.guild;s.insert(r,t,s.guildMap);var o=t.timestamp.split(" ")[0];s.dateMap[o]||s.dates.push(o),s.insert(o,t,s.dateMap)}},complete:function(){console.log("Done!"),console.log(s.i),console.log(s.len),i("Done!"),console.log(s.global[0]),console.log(s.global.length),console.log(s.dateMap),s.items=Object.keys(s.itemMap),s.buyers=Object.keys(s.buyerMap),s.sellers=Object.keys(s.sellerMap),s.guilds=Object.keys(s.guildMap),a()},delimiter:"#"})}))}return Object(i.a)(t,[{key:"insert",value:function(e,t,a){void 0===a[e]&&(a[e]=[]),a[e].push(t)}},{key:"getProgress",value:function(){return Math.ceil(this.i/this.len*100)}},{key:"getDataTable",value:function(){return{global:this.global,sellerMap:this.sellerMap,sellers:this.sellers,buyerMap:this.buyerMap,buyers:this.buyers,itemMap:this.itemMap,items:this.items,guildMap:this.guildMap,guilds:this.guilds,dateMap:this.dateMap,dates:this.dates}}}]),t}()}).call(this,a(141))},385:function(e,t,a){},386:function(e,t,a){},772:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(45),s=a.n(r),o=(a(385),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,824)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)}))}),l=a(31),c=a(9),d=a(11),h=a(13),u=a(14),p=(a(386),a(109)),m=a(822),f=a(815),j=a(2),b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Overview"}),Object(j.jsxs)("p",{children:["In the Elder Scrolls Online (ESO), trading is done through traders owned by guilds. Each week guilds can bid on a trader and the guild with the highest bid gets to use that trader for the week. Traders are located in every major town, and since some are more populated then others, the average bid on a trader varies grately by location.",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"Any player can go to these traders and use their gold to purchase items they desire, but only members of the guild can sell items through that trader. When a player purchases an item, a majority of the gold goes to the seller, but a small portion is taken as tax for the guild."]}),Object(j.jsx)("h1",{children:"Analysis"}),Object(j.jsx)("p",{children:"The goal of my analysis is to determine if ESO follows an economic model of perfect competition. For those unfimilar with economics, a market that is perfectly competitive has the following characteristics:"}),Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"Competition is at its greatest possible level"}),Object(j.jsx)("li",{children:"There is perfect knowledge, with no time lags in the flow of information"}),Object(j.jsx)("li",{children:"There are no barries to entry into or exit out of the market"}),Object(j.jsx)("li",{children:"No single seller can influence the market price or conditions"})]}),Object(j.jsx)("h1",{children:"Data"}),Object(j.jsxs)("p",{children:["In ESO, guild trader data is only visible to members within that guild, and only the past 10 days of sales are kept. A player by the name of Sharlikran created a program called"," ",Object(j.jsx)("a",{href:"https://www.esoui.com/downloads/info2753-MasterMerchant3.0.html",children:"Master Merchant"})," ","to analyze and collect this data. Unfortunetly, this means the data set used is limited to traders I have access too."]}),Object(j.jsx)("p",{children:"A sample of a record within the data set is as follows: "}),Object(j.jsx)(m.a,{style:f.a,language:"lua",wrapLongLines:!0,children:'MM01DataSavedVariables =\n{\n    ["Default"] = \n    {\n        ["MasterMerchant"] = \n        {\n            ["$AccountWide"] = \n            {\n                ["dataLocations"] = \n                {\n                    ["NA Megaserver"] = true,\n                },\n                ["version"] = 1,\n                ["SalesData"] = \n                {\n                    [122880] = \n                    {\n                        ["50:16:3:7:0"] = \n                        {\n                            ["itemIcon"] = "/esoui/art/icons/gear_telvanni_1hsword_a.dds",\n                            ["wasAltered"] = false,\n                            ["itemAdderText"] = "cp160 blue superior weapon set war maiden sword one-handed sharpened",\n                            ["sales"] = \n                            {\n                                [1] = \n                                {\n                                    ["price"] = 13500,\n                                    ["guild"] = "AK Tamriel Trade",\n                                    ["itemLink"] = "|H0:item:122880:362:50:0:0:0:0:0:0:0:0:0:0:0:0:51:0:0:0:0:0|h|h",\n                                    ["id"] = "1490373815",\n                                    ["wasKiosk"] = true,\n                                    ["seller"] = "@MyUsername1",\n                                    ["quant"] = 1,\n                                    ["buyer"] = "@MyUsername2",\n                                    ["timestamp"] = 1613007047,\n                                },\n                                [2] = \n                                {\n                                    ["price"] = 10000,\n                                    ["guild"] = "Unstable Unicorns",\n                                    ["itemLink"] = "|H0:item:122880:362:50:0:0:0:0:0:0:0:0:0:0:0:0:51:0:0:0:0:0|h|h",\n                                    ["id"] = "1291545171",\n                                    ["wasKiosk"] = true,\n                                    ["seller"] = "@MyUsername3",\n                                    ["quant"] = 1,\n                                    ["buyer"] = "@MyUsername1",\n                                    ["timestamp"] = 1590189492,\n                                },\n                            },\n                            ["oldestTime"] = 1590189492,\n                            ["itemDesc"] = "War Maiden\'s Sword",\n                            ["totalCount"] = 2,\n                        },\n                    },\n                },\n            }\n        }\n    }\n}'}),Object(j.jsxs)("p",{children:["Overall, data was recorded for"," ",this.props.data.guilds.length," guilds, with"," ",this.props.data.global.length," transactions being recorded"]}),Object(j.jsx)("h1",{children:"Processing"}),Object(j.jsxs)("p",{children:["A python script was used to process the data. Since the data was a lua file,"," ",Object(j.jsx)("a",{href:"https://pypi.org/project/lupa/",children:"lupa"})," was a very useful module to quickly import the data into a format recognizable to Python"]}),Object(j.jsx)("h2",{children:"Main.py"}),Object(j.jsx)(m.a,{style:f.a,language:"python",wrapLongLines:!0,children:"from convert_tableau import dump_tableau\nfrom anonymizer import save\nfrom anonymizer import load\n\nif __name__ == '__main__':\n    load()\n    dump_tableau()\n    save()"}),Object(j.jsx)("h2",{children:"anonymizer.py"}),Object(j.jsx)(m.a,{style:f.a,language:"python",wrapLongLines:!0,children:"anon_dict = {}\ni = 1\n\ndef load(filename='dict.csv'):\n    global anon_dict\n    global i\n    with open(filename, 'r') as f:\n        for line in f:\n            (key, val) = line.split(',')\n            anon_dict[key] = val\n            i += 1\n\ndef get(name):\n    global anon_dict\n    global i\n    if name not in anon_dict:\n        anon_dict[name] = f'@{i}'\n        i += 1\n    return anon_dict[name]\n\n\ndef save(filename='dict.csv'):\n    global anon_dict\n    with open(filename, 'w') as f:\n        for key in anon_dict:\n            f.write(f'{key},{anon_dict[key]}\n')\n"}),Object(j.jsx)("h2",{children:"read.py"}),Object(j.jsx)(m.a,{style:f.a,language:"python",wrapLongLines:!0,children:"import os\nimport re\n\nimport lupa\nfrom lupa import LuaRuntime\n\nlua = LuaRuntime(unpack_returned_tuples=True)\n\n\ndef find_all_files(path='./mm'):\n    data_files = []\n    dir_count = 0\n    file_count = 0\n    for root, dirs, files in os.walk(path):\n        dir_count += len(dirs)\n        for name in files:\n            if name.endswith(\".lua\"):\n                file_count += 1\n                full_path = os.path.join(root, name)\n                data_files.append(os.path.join(root, name))\n    print(f\"Found {file_count} files across {dir_count} directories\")\n    return data_files\n\n\ndef process_files(files, func):\n    lines = []\n    skipped = 0\n    file_count = len(files)\n\n    for i, file in enumerate(files):\n        print(f'[{i + 1}/{file_count}] Parsing {file}')\n        file = open(file, 'r')\n        file_str = file.read()\n        # Replace the MM file header\n        file_str = re.sub(r'MM[0-9]{2}DataSavedVariables =', '', file_str)\n        table = lua.eval(file_str)[\"Default\"][\"MasterMerchant\"][\"$AccountWide\"][\"SalesData\"]\n        for _, lv0 in enumerate(sorted(table.items())):\n            item_hash = lv0[0]\n            table_items = lv0[1]\n\n            for _, lv1 in enumerate(sorted(table_items.items())):\n                unknown_id = lv1[0]\n                table_grouping = lv1[1]\n\n                record = sorted(table_grouping.items())\n                if not (len(record) == 7 or len(record) == 4 or len(record) == 6):\n                    print(f'Warning: Could not parse record {record}')\n                    skipped += 1\n                    continue\n\n                item_desc = ''\n                table_sales = ''\n                if len(record) == 7:\n                    item_desc = record[1][1]\n                    table_sales = record[4][1]\n                if len(record) == 6:\n                    item_desc = record[1][1]\n                    table_sales = record[4][1]\n                if len(record) == 4:\n                    item_desc = record[1][1]\n                    table_sales = record[3][1]\n\n                for _, lv2 in enumerate(sorted(table_sales.items())):\n                    index = lv2[0]\n                    table_sale = lv2[1]\n                    sale = sorted(table_sale.items())\n                    line = func(item_desc, sale)\n                    lines.append(line)\n\n    print(f'Parsed {len(lines)} sale records across all files')\n    unique_lines = set(lines)\n    # print(f'{len(lines) - len(pd.unique(lines).tolist())} duplicates')\n    print(f'Skipped {skipped} records due to incomplete data')\n    print(f'Removed {len(lines) - len(unique_lines)} duplicate entries')\n    return unique_lines\n"}),Object(j.jsx)("h2",{children:"convert_tableau.py"}),Object(j.jsx)(m.a,{style:f.a,language:"python",wrapLongLines:!0,children:"from datetime import datetime\nfrom read import find_all_files\nfrom read import process_files\nfrom anonymizer import get\n\n\ndef process_func(item_desc, sale):\n    buyer = get(sale[0][1])\n    guild = sale[1][1]\n    item_id = sale[2][1]\n    item_link = sale[3][1]\n    price = sale[4][1]\n    quant = sale[5][1]\n    seller = get(sale[6][1])\n    timestamp = sale[7][1]\n    timestamp_str = datetime.fromtimestamp(timestamp)\n    was_kiosk = sale[8][1]\n\n    return f'{item_desc}#{guild}#{buyer}#{seller}#{price}#{quant}#{timestamp_str}\n'\n\n\ndef dump_tableau(filename='data_dump.csv'):\n    data = process_files(find_all_files(), process_func)\n    with open(filename, 'w') as f:\n        f.write('item#guild#buyer#seller#price#quant#timestamp\n')\n        f.writelines(data)\n"})]})}}]),a}(n.Component),g=a(329),y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[],n.min=new Date("2100-1-1"),n.max=new Date("1990-1-1"),n.avg=[],console.log(e),e.data.dates.forEach((function(t){var a,i={};e.data.dateMap[t].forEach((function(e){void 0!==i[e.guild]?i[e.guild]++:i[e.guild]=1}));var r=[];Object.keys(i).forEach((function(t){var a;null!==(a=e.exclude)&&void 0!==a&&a.includes(t)||r.push({name:t,value:i[t]})}));var s=e.data.dateMap[t].length;null===(a=e.exclude)||void 0===a||a.forEach((function(e){console.log(e),console.log(i[e]),console.log(s),s-=i[e]?i[e]:0,console.log(s)})),n.data.push({day:t,value:s,guilds:r}),n.avg.push(e.data.dateMap[t].length);var o=new Date(t);o<n.min&&(n.min=o),o>n.max&&(n.max=o)})),console.log(n.data),console.log(n.min),console.log(n.max),n}return Object(d.a)(a,[{key:"dateToString",value:function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())}},{key:"dateToDayOfWeek",value:function(e){switch(new Date(e).getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return"Unknown"}}},{key:"render",value:function(){var e=this;return console.log(this.min),console.log(this.max),Object(j.jsxs)("div",{className:"chart",children:[this.props.exclude?Object(j.jsx)("span",{}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:["Transactions were recorded between"," ",this.dateToString(this.min)," and"," ",this.dateToString(this.max)]}),Object(j.jsxs)("p",{children:["The average amount of transactions per day was"," ",Math.floor(this.avg.reduce((function(e,t){return e+t}))/this.avg.length)]})]}),Object(j.jsx)("div",{style:{width:"100%",height:"225px"},children:Object(j.jsx)(g.a,{data:this.data,to:this.max,from:this.min,tooltip:function(){var t=(arguments.length<=0?void 0:arguments[0]).data;return console.log(t),Object(j.jsxs)("div",{className:"tooltip",children:[Object(j.jsx)("div",{children:Object(j.jsx)("strong",{children:e.dateToDayOfWeek(t.day)})}),t.guilds?t.guilds.map((function(e){return Object(j.jsxs)("div",{style:{padding:"0.1rem 0.5rem"},children:[e.name,": ",e.value]})})):Object(j.jsx)("span",{}),Object(j.jsxs)("div",{style:{color:"red",padding:"0.1rem 0.5rem"},children:["Total: ",t.value?t.value:0]})]})}})})]})}}]),a}(n.Component),v=a(132),x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[],n.totalSaleCount=0,n.totalSaleValue=0;var i=[];Object.keys(e.data).forEach((function(t){var a=e.data[t],r=0;a.forEach((function(e){r+=parseInt(e.price)}));var s=a.length;i.push({player:t,saleCount:s,saleValue:r,nil:0}),n.totalSaleCount+=s,n.totalSaleValue+=r})),i.sort((function(e,t){return t.saleValue-e.saleValue}));for(var r=0;r<e.count;r++)n.data.push(i[r]);return n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"chart",children:[Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:["There was ",Object.keys(this.props.data).length," unique sellers, who sold ",this.totalSaleCount.toLocaleString()," ","items, valued at ",this.totalSaleValue.toLocaleString()," ","gold"]})}),Object(j.jsxs)("div",{style:{position:"relative",height:"300px"},children:[Object(j.jsx)("div",{style:{width:"100%",height:"300px",position:"absolute"},children:Object(j.jsx)(v.a,{data:this.data,keys:["saleCount","nil"],indexBy:"player",groupMode:"grouped",margin:{top:50,right:130,bottom:50,left:60},colors:"#0f0",theme:{textColor:"#fff"},axisLeft:null,legends:[{anchor:"top-right",itemWidth:-10,itemHeight:20,dataFrom:"keys",direction:"column"}],labelTextColor:"#fff"})}),Object(j.jsx)("div",{style:{width:"100%",height:"300px",position:"absolute",opacity:"0.5"},children:Object(j.jsx)(v.a,{data:this.data,keys:["nil","saleValue"],indexBy:"player",groupMode:"grouped",margin:{top:50,right:130,bottom:50,left:60},colors:"#f00",theme:{textColor:"#fff"},enableGridY:!1,legends:[{anchor:"bottom-right",itemWidth:-10,itemHeight:20,dataFrom:"keys",direction:"column"}],labelTextColor:"#fff",labelFormat:".3~s"})})]})]})}}]),a}(n.Component),O=a(343),w=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data={name:"Items",children:[]},n.totalSaleCount=0,n.totalSaleValue=0;var i=[];Object.keys(e.data).forEach((function(t){var a=e.data[t],n=0,r=0;a.forEach((function(e){n+=parseInt(e.price),r+=parseInt(e.price)/parseInt(e.quant)})),i.push({name:t,value:n,count:a.length,avg:Math.round(r/a.length)})})),i.sort((function(e,t){return t.value-e.value}));for(var r=0;r<e.count;r++)n.data.children.push(i[r]);return n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"chart",children:[Object(j.jsx)("div",{style:{width:"100%",height:"500px"},children:Object(j.jsx)(O.a,{data:this.data,identity:"name",value:"value",valueFormat:".03~s",margin:{top:10,right:10,bottom:10,left:10},labelSkipSize:12,labelTextColor:"#fff",parentLabelTextColor:{from:"color",modifiers:[["darker",2]]},borderColor:{from:"color",modifiers:[["darker",.1]]},leavesOnly:!0,tooltip:function(e){console.log(e);var t=e.node.data;return Object(j.jsx)("div",{className:"tooltip",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:t.name}),Object(j.jsxs)("div",{children:["Sold: ",t.count]}),Object(j.jsxs)("div",{children:["Total value:"," ",t.value.toLocaleString()]}),Object(j.jsxs)("div",{children:["Avg price per unit:"," ",t.avg.toLocaleString()]})]})})}})}),Object(j.jsx)("div",{style:{display:"grid",gridTemplate:"1fr 1fr 1fr 1fr 1fr / 1fr 1fr 1fr"},children:this.data.children.map((function(e,t){return t<15?Object(j.jsxs)("div",{style:{marginTop:"0.5rem"},children:[Object(j.jsxs)("div",{children:[t+1,") ",e.name]}),Object(j.jsx)("div",{children:e.value.toLocaleString()})]}):Object(j.jsx)("span",{})}))})]})}}]),a}(n.Component),k=a(346),_=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[];var i=Object.keys(e.data).filter((function(e){return/Crafting Motif [0-9]{1,2}: .*Chests/.test(e)})).filter((function(e){return/.*Honor.*|.*Silver.*|.*Refabricated.*|.*Meridian.*|.*Order.*|.*Icereach.*/.test(e)}));return console.log(i),i.forEach((function(t){var a={id:t,data:[]},i=e.data[t],r=new Date("3/25/2021");i.forEach((function(e){var t=new Date(e.timestamp);t>r&&a.data.push({x:n.formatDate(t),y:parseInt(e.price)})}));var s={},o={};a.data.forEach((function(e){s[e.x]?(s[e.x].y=s[e.x].y+e.y,o[e.x]+=1):(s[e.x]=e,o[e.x]=1)})),a.data.map((function(e){return{x:e.x,y:e.y/o[e.x]}})),a.data=Object.values(s),a.data.sort((function(e,t){return new Date(t.x)-new Date(e.x)})),n.data.push(a)})),n.data.push({id:"Anniversary Event Start",data:[{x:"4/1/2021",y:0},{x:"4/1/2021",y:28e4}]}),n}return Object(d.a)(a,[{key:"formatDate",value:function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())}},{key:"render",value:function(){return console.log(this.data),Object(j.jsx)("div",{children:Object(j.jsx)("div",{style:{width:"100%",height:"500px"},children:Object(j.jsx)(k.a,{data:this.data,xScale:{type:"time",format:"%m/%d/%Y",useUTC:!1,precision:"day"},xFormat:"time:%m/%d/%Y",yScale:{type:"linear",stacked:!1},axisLeft:{legend:"linear scale",legendOffset:12},axisBottom:{format:"%b %d",tickValues:"every 4 days",legend:"time scale",legendOffset:-12},margin:{top:20,right:110,bottom:50,left:60},theme:{textColor:"#fff"},useMesh:!0,curve:"monotoneX",colors:{scheme:"paired"},legends:[{anchor:"top-right",direction:"column",itemWidth:150,itemHeight:20,translateX:10}],enableSlices:!1,tooltip:function(e){console.log(e);var t=e.point;return Object(j.jsxs)("div",{className:"tooltip",children:[Object(j.jsx)("div",{children:t.serieId}),Object(j.jsxs)("div",{children:["Sold for an average of"," ",t.data.yFormatted," on"," ",t.data.xFormatted]})]})}})})})}}]),a}(n.Component),M=a(347),T=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.matrix=void 0,n.keys=[],n.Title=function(e,t){var a=e.center;return console.log(e),Object(j.jsx)("text",{x:a[0],textAnchor:"middle",y:-60,fill:"white",fontWeight:"bold",children:t})};var i,r,s,o=(i=e.sellers,r="buyer",s=e.count,Object.keys(i).map((function(e){var t=i[e].map((function(e){return e[r]})).reduce((function(e,t){return e[t]=-~e[t],e}),{});return{records:Object.keys(t).map((function(e){return{player:e,count:t[e]}})).sort((function(e,t){return t.count-e.count})).slice(0,s),player:e}})).sort((function(e,t){return t.records.length-e.records.length})).slice(0,s)),l=0,d={},h={};o.forEach((function(e){e.records.forEach((function(t){h["".concat(e.player,"-").concat(t.player)]=t.count}))})),console.log(h),Object.keys(h).forEach((function(e){var t=e.split("-"),a="".concat(t[1],"-").concat(t[0]);h[a]?h[e]===h[a]&&(delete h[e],delete h[a]):delete h[e]})),console.log(h),Object.keys(h).forEach((function(e){var t,a,n=e.split("-");null!==(a=d[t=n[0]])&&void 0!==a||(d[t]=l++)})),console.log(d);var u=Object.keys(d).map((function(e){return{player:e,index:d[e]}})).sort((function(e,t){return e.index-t.index}));return n.keys=u.map((function(e){return e.player})),console.log(n.keys),n.matrix=Array.from(Array(n.keys.length),(function(){return Array(n.keys.length).fill(0)})),Object.keys(h).forEach((function(e){var t=e.split("-");n.matrix[d[t[0]]][d[t[1]]]=h[e],n.matrix[d[t[1]]][d[t[0]]]=h["".concat(t[1],"-").concat(t[0])]})),console.log(n.matrix),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"chart",children:Object(j.jsx)("div",{style:{width:"100%",height:"500px"},children:Object(j.jsx)(M.a,{matrix:this.matrix,keys:this.keys,margin:{top:90,right:90,bottom:90,left:90},layers:["ribbons","arcs","labels","legends",function(t){return e.Title(t,'Read as: seller sold to buyer "n" times')}],arcTooltip:function(e){var t=e.arc;return Object(j.jsxs)("div",{className:"tooltip",children:[t.id,": ",t.formattedValue]})},ribbonTooltip:function(e){console.log(e);var t=e.ribbon,a=t.source,n=t.target;return Object(j.jsxs)("div",{className:"tooltip",children:[Object(j.jsxs)("div",{children:[a.id," sold to ",n.id," ",a.formattedValue," times"]}),Object(j.jsxs)("div",{children:[n.id," sold to ",a.id," ",n.formattedValue," times"]})]})},colors:{scheme:"paired"},labelRotation:-90})})})}}]),a}(n.Component),S=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Transaction History"}),Object(j.jsx)(y,{data:this.props.data}),Object(j.jsx)("h1",{children:"Top Sellers"}),Object(j.jsx)(x,{data:this.props.data.sellerMap,count:10}),Object(j.jsx)("h1",{children:"Item Marketshare"}),Object(j.jsx)(w,{data:this.props.data.itemMap,count:75}),Object(j.jsx)("div",{style:{paddingBottom:"2rem"},children:" "}),Object(j.jsx)("h1",{children:"Changes in Price as a Result of Changes in Supply"}),Object(j.jsx)(_,{data:this.props.data.itemMap}),Object(j.jsx)("em",{children:"April 1st was the start of the Anniversary event, where compleating any quest has a chance to give you any motif (recipe that teaches you how to craft a unique style of armor) in the game. This substatially increases the supply as they are normally very rare. As a result, we should expect the price to decrease"}),Object(j.jsxs)("h1",{children:["Interactions between Sellers ","&"," Buyers"]}),Object(j.jsx)(T,{buyers:this.props.data.buyerMap,sellers:this.props.data.sellerMap,count:250})]})}}]),a}(n.Component),C=a(90),D=a(820),I=a(821),E=a.p+"static/media/perfect_comp.2a26e959.png",A=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[],n.Title=function(e){var t=e.width;e.height;return Object(j.jsx)("text",{x:t/2,textAnchor:"middle",y:-15,fill:"white",fontWeight:"bold",children:n.props.title})};var i=[];return Object.keys(e.data).forEach((function(t){var a=e.data[t],n=[];a.forEach((function(t){t.item===e.item&&n.push(t)})),n.length>0&&i.push({player:t,recordsForItem:n})})),console.log(i),i.forEach((function(t){var a=t.recordsForItem.map((function(e){return parseInt(e.quant)}));n.data.push({player:t.player,quant:e.computeStat(a)})})),console.log(n.data),n.data.sort((function(e,t){return t.quant-e.quant})),n.data=n.data.slice(0,e.show+1),console.log(n.data),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{children:Object(j.jsx)("div",{style:{width:"100%",height:"300px"},children:Object(j.jsx)(v.a,{data:this.data,keys:["quant"],indexBy:"player",groupMode:"grouped",margin:{top:50,right:130,bottom:50,left:60},colors:"#0f0",theme:{textColor:"#fff"},axisLeft:null,legends:[{anchor:"top-right",itemWidth:-10,itemHeight:20,dataFrom:"keys",direction:"column"}],labelTextColor:"#fff",layers:["grid","axes","bars","markers","legends",this.Title],tooltip:function(t){var a=t.data;return Object(j.jsxs)("div",{className:"tooltip",children:[a.player," sold ",a.quant," unique quantities of ",e.props.item]})}})})})}}]),a}(n.Component),q=a(168),L=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[],n.yMax=Number.MIN_VALUE,n.Title=function(e,t){var a=e.innerWidth;return console.log(e),Object(j.jsx)("text",{x:a/2,textAnchor:"middle",y:-15,fill:"white",fontWeight:"bold",children:t})},e.players.forEach((function(t){var a=e.data[t].filter((function(t){return t.item===e.item})),i={id:t,data:[]};a.forEach((function(e){var t=parseInt(e.price)/parseInt(e.quant);n.yMax<t&&(n.yMax=t),i.data.push({x:parseInt(e.quant),y:t})})),n.data.push(i)})),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{children:Object(j.jsx)("div",{style:{width:"100%",height:"300px"},children:Object(j.jsx)(q.a,{data:this.data,margin:{top:60,right:140,bottom:70,left:90},xScale:{type:"linear",min:0,max:"auto"},xFormat:function(e){return e+" pcs"},yScale:{type:"linear",min:0,max:1.5*this.yMax},yFormat:function(e){return e+"g per"},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:130,translateY:0,itemWidth:100,itemHeight:12,itemsSpacing:5,itemDirection:"left-to-right",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:{textColor:"#fff"},layers:["grid","axes","nodes","markers","legends",function(t){return e.Title(t,"Price per unit of ".concat(e.props.item," for players: ").concat(e.props.players.join(", ")))}],tooltip:function(t){var a=t.node.data;return Object(j.jsxs)("div",{className:"tooltip",children:[a.serieId," sold a stack of ",a.x," ",e.props.item," for ",a.y,"g per unit"]})}})})})}}]),a}(n.Component),F=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.data=[],n.Title=function(e,t){var a=e.innerWidth;return console.log(e),Object(j.jsx)("text",{x:a/2,textAnchor:"middle",y:-15,fill:"white",fontWeight:"bold",children:t})};var i={};return e.data[e.item].forEach((function(t){var a=new Date(t.timestamp);a>e.dateStart&&a<e.dateEnd&&(i[t.guild]?i[t.guild].data.push({x:t.timestamp.split(" ")[0],y:parseInt(t.price)/parseInt(t.quant)}):i[t.guild]={id:t.guild,data:[{x:t.timestamp.split(" ")[0],y:parseInt(t.price)/parseInt(t.quant)}]})})),Object.keys(i).forEach((function(e){return n.data.push(i[e])})),n}return Object(d.a)(a,[{key:"formatDate",value:function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())}},{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{children:Object(j.jsx)("div",{style:{width:"100%",height:"300px"},children:Object(j.jsx)(q.a,{data:this.data,margin:{top:60,right:140,bottom:70,left:90},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},xFormat:"time:%Y-%m-%d",axisBottom:{format:"%b %d",tickValues:"every 2 days"},colors:{scheme:"category10"},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:130,translateY:0,itemWidth:100,itemHeight:12,itemsSpacing:5,itemDirection:"left-to-right",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:{textColor:"#fff"},layers:["grid","axes","nodes","markers","legends",function(t){return e.Title(t,"Sales of ".concat(e.props.item," between ").concat(e.formatDate(e.props.dateStart)," to ").concat(e.formatDate(e.props.dateEnd)))}],tooltip:function(e){var t=e.node.data;return Object(j.jsxs)("div",{className:"tooltip",children:[Object(j.jsxs)("div",{children:["Guild: ",t.serieId]}),Object(j.jsxs)("div",{children:["Date: ",t.formattedX]}),Object(j.jsxs)("div",{children:["Price: ",t.formattedY,"g"]})]})}})})})}}]),a}(n.Component),N=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.data;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Preface"}),Object(j.jsxs)("p",{children:["To make the analysis easier, we will assume both buyers and sellers are only making use of tool provided by the game itself. This means we will not account for tools such as"," ",Object(j.jsx)("a",{href:"https://esouimods.github.io/3-master_merchant.html",children:"Master Merchant"})," ","(MM) and"," ",Object(j.jsx)("a",{href:"https://tamrieltradecentre.com/",children:"Tamriel Trade Center"})," ","(TTC), which only a small portion of the player base make use of."]}),Object(j.jsx)("h1",{children:"1) Many firms"}),Object(j.jsxs)("p",{children:["From this data set alone, ",e.sellers.length," unique sellers were recorded across ",e.guilds.length," guilds. With over 200 guild traders available, there could be anywhere from ",2e4.toLocaleString()," to"," ",1e5.toLocaleString()," sellers."]}),Object(j.jsx)("h1",{children:"2) Freedom of entry and exit"}),Object(j.jsx)("h2",{children:"Freedom of entry"}),Object(j.jsx)("p",{children:"Barriers to entry can go both ways. In order to sell items, one must be a member of a guild to have access to a trader. Depending on the guild, they may require a weekly fee to maintain membership, causing a barrier to enter the market"}),Object(j.jsx)("h2",{children:"Freedom of exit"}),Object(j.jsxs)("p",{children:["In order to list an item on the market, a tax must be paid, based on the value of the item you are selling, which goes to oblivion (this is a measure implemented by the developers of many MMOs as one method of a"," ",Object(j.jsx)("a",{href:"https://en.wikipedia.org/wiki/Gold_sink",children:"gold sink"}),"). If a player is listing multiple high value items but suddenly has to exist the market, that gold will be permenetly lost as they won't make it back once the item(s) sell."]}),Object(j.jsx)("h1",{children:"3) All firms produce an identical product"}),Object(j.jsx)("p",{children:"The products that can be sold are determined by what items the developers create. Players are not able to create their own unique products, making this requirement true."}),Object(j.jsx)("h1",{children:"4) All firms are price takers"}),Object(j.jsxs)("p",{children:["In order for this condition to be true, an individual seller should have no influence over the price . The easiest way to determine this is by checking if a seller's demand curve is perfectly elastic"," ",Object(j.jsx)(I.a,{content:Object(j.jsxs)("div",{style:{width:"21vw"},children:[Object(j.jsx)("p",{children:"In economics, elasticity is the measure of the sensitivity to change between two variables. In our scenario, perfect elasticity implies that if a seller where to change their price, all of the demand for their items will disapear. In other words, ploting a curve for demand would result in a horizontal line with a slope of 0."}),Object(j.jsx)("img",{src:E,alt:"Perfect competition",style:{width:"20vw"}})]}),title:"Econommics: Elasticity",trigger:"hover",children:Object(j.jsx)(D.a,{})})]}),Object(j.jsx)("p",{children:"The easiest way to check this is to find a seller with a large number of distinct quantities sold for a particular item"}),Object(j.jsx)(A,{data:this.props.data.sellerMap,item:"dreugh wax",computeStat:function(e){return Object(C.a)(new Set(e)).length},show:10,title:"Unique quantities for the quantity of dreugh wax sold, per player"}),Object(j.jsx)("p",{children:"Looking at the above chart, player @3753 sold 11 different quantities of the item"}),Object(j.jsx)(L,{data:this.props.data.sellerMap,item:"dreugh wax",players:["@3753"]}),Object(j.jsx)("p",{children:"If we make a Quantity v. Price chart, we can see that the line of best fit would have a slope near 0, making this true."}),Object(j.jsx)("h1",{children:"5) There is perfect information and knowledge"}),Object(j.jsx)("p",{children:"For this condition to be true, everyone must be aware of the most up-to-date info on prices and events that could effect prices"}),Object(j.jsxs)("p",{children:["On March 8th, U29: ",Object(j.jsx)("em",{children:"The Flames of Ambition"})," was released. With this update, the max level was raised for the first time in over 3 years. As a result of this, many competitive players wanted to get to the new level cap as fast as possible. One way to do this is with a potion called Mythic Ambrosia, which increases the rate at which you level up by 150%."]}),Object(j.jsx)("p",{children:"At this point in time, many who are aware of ecomonics will know that with a drastic increase in demand, prices will skyrocket. If this condition was true, every seller would have been aware of this and have accounted for it accordingly."}),Object(j.jsx)(F,{item:"Aetherial Dust",data:this.props.data.itemMap,dateStart:new Date("3/05/2021"),dateEnd:new Date("3/30/2021")}),Object(j.jsx)("p",{children:"Looking at the above chart, some interesting trends surface:"}),Object(j.jsxs)("ol",{children:[Object(j.jsx)("li",{children:"The point at which the price will be highest is right when it becomes available. Looking at sales before the 8th, we see some people sold too early and lost a substantial amount of money"}),Object(j.jsx)("li",{children:"Lucian Allegiance is one of the most competitive trading guilds in the game, holding their trader at the most populous city of Mournhold. Looking at all of the sales at the peak (March 7th), this was the only guild which sold the item at an inflated price. The only sale from another guild was at the original price before the price increase"}),Object(j.jsx)("li",{children:"As the time since the updates draw out, start seeing more and more sales from other guilds. This is most likely due to word of mouth spreading once players can physically see the price increase"})]}),Object(j.jsx)("p",{children:"Based on these observations, the spread of information doesn't appear to immedietly reach everyone, making this condition untrue"}),Object(j.jsx)("h1",{children:"Conclusion"}),Object(j.jsx)("p",{children:"After careful analysis, the only conditions which hold true are 1, 3, and 4. Since 2 and 5 don't, we cannot use this economy as a model for perfect competition"})]})}}]),a}(n.Component),W=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("h1",{children:"The Economy of ESO"}),Object(j.jsx)("nav",{className:"nav",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(p.a,{exact:!0,activeClassName:"activeNav",to:"/app/home",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(p.a,{exact:!0,activeClassName:"activeNav",to:"/app/overview",children:"Overview"})}),Object(j.jsx)("li",{children:Object(j.jsx)(p.a,{exact:!0,activeClassName:"activeNav",to:"/app/analysis",children:"Analysis"})})]})}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/app/analysis",children:Object(j.jsx)(N,{data:this.props.data})}),Object(j.jsx)(l.a,{path:"/app/overview",children:Object(j.jsx)(S,{data:this.props.data})}),Object(j.jsx)(l.a,{path:"/app/home",children:Object(j.jsx)(b,{data:this.props.data})})]})]})}}]),a}(i.a.PureComponent),P=a(362),V=a.p+"static/media/spinner.3fd780cb.png",U=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).props=void 0,n.parser=void 0,n.setStageText=function(e){n.state&&n.setState({stageText:e})},n.redirect=function(){console.log("here"),n.props.history.push("/app/home"),console.log(n.props.history)},n.parser=new P.a(n.redirect,n.setStageText),n.state={stageText:"Fetching data..."},console.log(e),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.parser.getDataTable()),console.log(this.props.history),console.log(this.state),0===this.parser.getDataTable().global.length&&"/loading"!==this.props.history.location.pathname&&this.props.history.push("/loading"),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/app",component:function(){return Object(j.jsx)(W,{data:e.parser.getDataTable()})}}),Object(j.jsx)(l.a,{path:"/loading",children:Object(j.jsxs)("div",{style:{textAlign:"center",marginTop:"10vh"},children:[Object(j.jsx)("h2",{children:"Please wait while the app processes the data"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:this.state.stageText}),Object(j.jsx)("img",{src:V,style:{width:"15rem",marginTop:"2rem",animationName:"spinner",animationDuration:"4s",animationIterationCount:"infinite",background:"transparent"},alt:"Spinner"})]})]})})]})}}]),a}(n.Component),B=Object(l.f)(U),H=a(44),Y=Object(H.a)();s.a.render(Object(j.jsx)(l.b,{history:Y,children:Object(j.jsx)(B,{})}),document.getElementById("root")),o()}},[[772,1,2]]]);
//# sourceMappingURL=main.d384026f.chunk.js.map